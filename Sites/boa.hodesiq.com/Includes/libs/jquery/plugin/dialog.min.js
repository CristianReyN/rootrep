jQuery.fn.dialog=function(a){var b=jQuery.extend({title:"h1, h2, h3, h4, h5, h6, legend, label, p",focus:"a, input, button, select, textarea, [tabindex]",buttons:false},a);return jQuery(this).each(function(){if(!jQuery("body").is("[role]")){jQuery("body").attr("role","application")}jQuery("#dialog").trigger("close");var f=jQuery('<div class="modal-screen"><iframe src="javascript:false;"></iframe></div>');f.css("opacity",0.7).height(jQuery(window).height()).width(jQuery(window).width()).children(0).css("opacity",0);var e=jQuery('<div id="dialog" role="dialog" aria-labelledby="dialog-title"></div>');var h=jQuery('<a href="#" class="dialog-close" tabindex="2" role="button" aria-controls="dialog">Close</a>').appendTo(e);var g=jQuery('<div class="dialog-content"></div>').append(this).appendTo(e);e.find(b.title).eq(0).attr("id","dialog-title");if(b.buttons){var c=jQuery('<div class="dialog-footer"></div>');for(var d in b.buttons){jQuery("<button>"+d+"</button>").click(b.buttons[d]).appendTo(c)}c.appendTo(e)}e.bind("close",function(){if(document.getElementById("video")){var i=document.getElementById("video");i.innerHTML=""}f.remove();e.remove();jQuery("body").removeClass("blocked");jQuery(document).unbind("keydown.dialog focus.dialog")});h.click(function(){e.trigger("close");return false});jQuery(document).bind("keydown.dialog",function(i){if(i.which==27){e.trigger("close")}});jQuery(document).bind("focus.dialog",function(i){if(!jQuery(i.target).parents("#dialog").length){e.find("a, input, button, select, textarea, [tabindex]")[0].focus()}});jQuery("body").addClass("blocked").append(f).append(e);if(g.find(b.focus).length){g.find(b.focus)[0].focus()}else{if(b.buttons){c.find("button")[0].focus()}else{h[0].focus()}}})};jQuery.dialog=function(a,b){var f=jQuery.extend({loadingText:"Loading...",complete:false},b);jQuery('<span class="ajax" tabindex="-1">'+f.loadingText+"</span>").dialog({title:"span",focus:"span"});var e=a.split(" ");var d=e[0];e.shift();if(e.length){var c=e.join(" ")}jQuery.get(d,function(g){var g=jQuery("<div></div>").append(g);if(c!=" "){g=g.find(c)}g.dialog(b);if(f.complete){f.complete(g)}})};jQuery("a.video").click(function(){jQuery.dialog(jQuery(this).attr("href")+" #video");return false});